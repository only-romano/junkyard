<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>DOM Metrics</title>
</head>
<body>

  <div id="example" class="example" onclick="scrollDown(example)">
    ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
  </div>

  <div id="absolute">cococo</div>

  <style type="text/css">
    .example {
      width: 300px;
      height: 200px;
      border: 25px solid #e8c48f;
      padding: 20px;
      overflow: auto;
    }

    #absolute {
      position: absolute;
    }
  </style>

  <script type="text/javascript">
    console.log( 'Standart offsetParent:', example.offsetParent );
    console.log( 'Absolute position offsetParent:', absolute.offsetParent );
  </script>

  <main style="position: relative">
    <form>
      <div id='example2' class="example" style="position: absolute; left: 180px; top: 180px" onclick="openUp(example2)">
         ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
         tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
         quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
         consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
         cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
            cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
            proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div>
    </form>
  </main>

  <script type="text/javascript">
    console.log( 'Another absolute position offsetParent:', example2.offsetParent );
    console.log( 'Some offsetLeft - to offset Parent left:', example.offsetLeft );
    console.log( 'Some offsetTop - to offset Parent top:', example.offsetTop );
    console.log( 'Some offsetWidth - width(self + scroll) + padding + border:', example.offsetWidth );
    console.log( 'Some offsetHeight - height(self + scroll) + padding + border:', example2.offsetHeight );
    console.log( 'Some offsetTop:', example.offsetTop );
    console.log( 'Metrics for display:none and DOM-out elements are 0, and offsetParent is null');
    console.log(' ');
    console.log( 'Another offsetLeft:', example2.offsetLeft );
    console.log( 'Another offsetTop:', example2.offsetTop );
    console.log( 'Another offsetWidth:', example2.offsetWidth );
    console.log( 'Another offsetHeight:', example2.offsetHeight );

    function isHidden(elem) {
      // Works even if parent node is 'display:none';
      // Not works with 'tr';
      // Out of screen elements or 'visibility:hidden' elements are not hidden;
      // Empty elements as 'div', 'span' etc are hidden.
      return !elem.offsetWidth && !elem.offsetHeight;
    }

    console.log(' ');
    console.log( 'Some clientTop - border:', example.clientTop );
    console.log( 'Some clientLeft - border + scroll(if arabian, jewish etc.):', example.clientLeft );
    console.log( 'Some clientWidth - content width + padding (without scroll):', example.clientWidth );
    console.log( 'Some clientHeight - content height + padding (without scroll):', example.clientHeight );
    console.log( 'Some scrollWidth - content width for all longs:', example.scrollWidth );
    console.log( 'Some scrollHeight - content height for all longs:', example.scrollHeight );
    console.log(' ');
    console.log( 'Another clientTop:', example2.clientTop );
    console.log( 'Another clientLeft:', example2.clientLeft );
    console.log( 'Another clientWidth:', example2.clientWidth );
    console.log( 'Another clientHeight:', example2.clientHeight );
    console.log( 'Another scrollWidth:', example2.scrollWidth );
    console.log( 'Another scrollHeight:', example2.scrollHeight );

    console.log(' ');
    console.log( 'Some scrollLeft - left scrolled out content:', example.scrollLeft );
    console.log( 'Some scrollTop - top scrolled out content:', example.scrollTop );
    console.log(' ');
    console.log( 'Another scrollLeft:', example2.scrollLeft );
    console.log( 'Another scrollTop:', example2.scrollTop );


    function scrollDown(elem) {
      elem.scrollTop += 25;
    }

    var help = {};
    function openUp(elem) {
      // Open element for whole height of content;
      console.log( elem.scrollHeight - elem.scrollTop - elem.clientHeight );
      if (!help[elem]) {
        help[elem] = elem.clientHeight + 'px';
        console.log( help[elem] );
      } else if (elem.style.height !== help[elem]) {
        elem.style.height = help[elem];
        return;
      }
      elem.style.height = elem.scrollHeight + 'px';
    }

    (function checkScroll() {
      var div = document.createElement('div');
      div.style.padding = '0px';
      div.style.border = 'none';
      div.style.width = '200px';
      div.style.height = '200px';
      div.style.overflowY = 'scroll';
      div.style.visibility = 'hidden';

      document.body.appendChild(div);
      console.log( 'Scroll is: ' + (div.offsetWidth - div.clientWidth) + ' px' );
      document.body.removeChild(div);
    })();

  </script>

  <style type="text/css">
    #moving-div {
      border: 5px groove green;
      padding: 5px;
      margin: 10px;
      background-color: yellow;
    }
  </style>

  Before Before Before

  <div id="moving-div">
    Text Text Text<br>
    Text Text Text<br>
  </div>

  After After After

  <script name="valera" type="text/javascript">
    var div = document.getElementById('moving-div');

    var placeHolder = document.createElement('div');
    placeHolder.style.height = div.offsetHaight + 'px';

    var computedStyle = div.currentStyle || getComputedStyle(div, null);

    placeHolder.style.marginTop = computedStyle.marginTop;
    placeHolder.style.marginBottom = computedStyle.marginBottom;

    document.body.insertBefore(placeHolder, div);

    div.style.position = 'absolute';
    div.style.right = div.style.top = 0;
  </script>


  <style>
    #field {
      width: 200px;
      border: 10px groove black;
      background-color: #00FF00;
      position: relative;
    }

    #ball {
      position: absolute;
    }
  </style>

    <div id="field">
    <img src="https://js.cx/clipart/ball.svg" id="ball"> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
  </div>

  <script type="text/javascript">
    console.log(field.offsetTop + field.clientTop + field.clientHeight / 2 - ball.clientHeight / 2);
    ball.style.top = (field.clientHeight / 2 - ball.clientHeight / 2) + 'px';
    ball.style.left = (field.clientWidth / 2 - ball.clientHeight / 2) + 'px';
  </script>

  <div id='elemWidth' style="width: 100px; height: 100px; background-color: yellow; overflow: scroll;" onclick="openDiv(elemWidth)"></div>

  <script type="text/javascript">
    var objectDiv = {};
    function openDiv(elem) {
      var width = elem.offsetWidth;
      if (!objectDiv[elem.id]) {
        objectDiv[elem.id] = width;
      } else if (width !== objectDiv[elem.id]) {
        elem.style.width = objectDiv[elem.id] + 'px';
        return;
      }

      elem.style.width = document.body.style.width;
    }

    console.log( elemWidth.clientWidth );
  </script>

</body>
</html>